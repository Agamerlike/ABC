# ABC066
Atcoder Beginner Contest066の自分の解答

# B
sの末尾を1削った状態からスタート。それぞれの場合について実際に偶文字列かどうか確かめる。

string型についてる関数くん大活躍（調べるのに時間食ったとか言わない）。

# C
実際に操作を行うと分かるが、数列の並びは、以下のようになるかその逆順になる。

> (数列の奇数番目の1番後ろ), ... , a_1, a_2, ... , (数列の偶数番目の1番後ろ)

逆順になる条件は最後に挿入されるのが奇数番目か偶数番目かで決まる。偶数番目なら、逆向きに並び替える操作があるので、(偶数番目の1番後ろ)が先頭に来る。

# D
非常に場合分けが多くなってこんがらがってきたのでギブアップ。

k=1の場合はn通りである。k=n+1の場合は1通りである。

k=2以上の場合を考える。この場合(n+1)Ck未満になるのは確実であるが、取り除かれる部分は必ず被っている数字に関連する部分だろうということが推測できる。

結論から言うと、被る場合とは以下のようなシチュエーションのことである。

被る数字が最初に出てくるまでに出てくる数字の数をa,被る数字が最後に出てくるまでに出てくる数字の数をbとすると、それらの数字の外側に当たるa+n-b個の数字から被る数字以外がk-1個選ばれ、残り1個が被った数字の場合は、同じ数列となるため取り除かれる。

また、おそらく被る数字に挟まれたb-a+1個の数字からなる区間がすべて使われている場合にも同様の論法で被りが生じると考えられる。

サンプルは通ったが、REとWAが出まくったので放棄。書いてたらこんがらがっていた場合分けがすっきりして実装できた。

### 追記（解説読んだ）

場合分けの必要はなかったが、解説と同じやり方だったらしい。実装力ェ……REの原因を探りたい。