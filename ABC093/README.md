# ABC093
Atcoder Beginner Contest093の自分の解答

# A
問題の制約がアルファベット小文字をすべて使うと思い込んでおり、結果相当ロスする結果となった。

# B
例外を取り除くのに苦労した。難しい部類の問題だと思う。

基本的にはAからA+K-1,B-K+1からBまでを出力すればよい。ただし範囲が被っている場合(A+K-1>B-K+1)、B-AがKより狭い場合はAからBまですべて出力する。

# C
詳しい証明は結局の所できなかったのだが、累積差を考えるとa=bみたいな形にして両方を1増やすのが最適解だろうということは分かった。しかし、この方法ではうまくいかないので1つを2増やす回数を最大化する方法にシフトした。（累積差的には効率は同じ……はず）

要は最大値との差を偶数にすればいいので、3つの整数の奇数の個数で場合分けを行う。3つとも奇数あるいは偶数の場合は最初から差は偶数である。1つもしくは2つ奇数の場合はそれぞれ偶数、奇数を1増やせばよい。2増やす回数は簡単に求まる。

# D
色々考えたが、結局分からず。正直ここにまとめられる自信はないのだが、一応記しておく。

a=bの場合、

> a*b (= a^2) \> (a-i)(b+i) (= a^2 - 1)

> a*b \> (a+i)(b-i)

はiによらず成立する。

a>bの場合について、

> a*b \> (a+i)(b-i)

はiによらず成立する（だろう）。問題は逆の場合である。

> a*b \> (a-i)(b+j)

上式は少なくともi=jの場合は成立しないことがある。したがって、成立するまでjを固定してiを減らしていく操作を行うことになる。

一度成立してしまえばそれ以降は単調減少となると考えてこの方法で実装したが、単調減少ではないことが判明したためﾎﾞｶｰﾝ。

### 追記（解説見た）
答えについては解説を見た段階でほぼオチているので、少し補足の証明まがいのことをいくつか。というかどんなもの食ってりゃ思いつくんだあんな発想。。。

a=bの場合は上記の通り(a+i)(a-i)のパターンが2(a-1)通り存在。

a+1=bの場合もa=bの場合と同様に(a+i)(a-i)のパターンが2(a-1)通り存在すると結論付けられる。なぜならば、bから考えた時(a+i)(a-i)のパターンにならないのは(b,a)となるパターンのみでそれはもとの仮定と積は同じ（交換法則より）なので条件を満たさないためである。(b,a+j)はもちろんダメである。(b,a-j)はいける可能性があるがもともとの考え方より総数が多くなることはない。

問題はそれ以上に差がある場合である。ここでは、cをc^2 < a*bを満たす最大の整数としている（sqrt(a\*b)未満の最大の整数）。

a=bのときは明らかにc=aなので、c=aの場合は考えなくてもよい。a+1=bのときは同じくc=aであり、なおかつ必ずc(c+1)=abが保証されるためc(c+1)=abのときも考えなくてもよい。ここから、cについて考えるべきなのはc(c+1) < abもしくはc(c+1) > abの場合である。なお、いずれにせよc^2 < abであることは保証されているのでc^2　> abについては全く考える必要がない。

c(c+1) > abのとき、これは(c,c)だったときのパターンと同一視できる。したがって(c+i)(c-i)のパターンが2(c-1)通り存在する。また、(c,c)自体も条件を満たすので、全体では2c-1通りである。

c(c+1) < abのとき、(c,c)ももちろん可能であるが(c,c+1)、(c+1,c)を使うパターンも可能なのでこちらを使うと総数を最大化できる。この場合、全体では2c通りである。

これですべてのパターンを尽くせた。ここで、使おうと思っていた番号がすでに使われている場合に注意する。

使おうと思っていた番号がすでに使われていた場合、これは真ん中の(c,c)もしくは(c,c+1)の上側半分のみを考えれば良いことが分かる。なぜならば、上側と下側から出てくる場合、それぞれ(c,c), (c,c+1)の1つ後のパターンは(c+1,c+1)、(c+1,c)のようになり、すでに試したパターンと完全に一致するため調べる必要がないからである。

上側半分について、小さい方が先に出るという前提のもとでは、大きいほうが2*cよりも大きい場合とそれ以下である場合がある。しかしどちらについても総数は-1される。小さい方のすでに使われている番号をスキップして対応させることを考えたとき、必ずより積が小さくなる組み合わせと対になるためである。小さい方はスキップされるが、大きい方はスキップされないことに起因している。大きい方がスキップされると、このずれはもとに戻る。結局のところ総数はスキップされた小さいものの数だけ、つまり1だけ減る。

大きい方が先に出る場合は、積が大きくなる組み合わせになるので、最初はチェックしなければならない。しかし、最初以降は最初より必ず小さくなるのでチェックする必要はない。最初で弾かれた場合は、小さい方もスキップするようにすると、結局もとの組み合わせになる。したがって弾かれた場合のみ-2するとよい。

ここまでがんばったけどまだWAなんすよね……